<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP Manual: Set timeout period on a stream</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP Manual</a></li>
  <li class="header up"><a href="funcref.html">Function Reference</a></li>
  <li class="header up"><a href="refs.basic.other.html">Other Basic Extensions</a></li>
  <li class="header up"><a href="book.stream.html">Streams</a></li>
  <li class="header up"><a href="ref.stream.html">Stream Functions</a></li>
  <li><a href="function.set-socket-blocking.html">set_socket_blocking</a></li>
  <li><a href="function.stream-bucket-append.html">stream_bucket_append</a></li>
  <li><a href="function.stream-bucket-make-writeable.html">stream_bucket_make_writeable</a></li>
  <li><a href="function.stream-bucket-new.html">stream_bucket_new</a></li>
  <li><a href="function.stream-bucket-prepend.html">stream_bucket_prepend</a></li>
  <li><a href="function.stream-context-create.html">stream_context_create</a></li>
  <li><a href="function.stream-context-get-default.html">stream_context_get_default</a></li>
  <li><a href="function.stream-context-get-options.html">stream_context_get_options</a></li>
  <li><a href="function.stream-context-get-params.html">stream_context_get_params</a></li>
  <li><a href="function.stream-context-set-default.html">stream_context_set_default</a></li>
  <li><a href="function.stream-context-set-option.html">stream_context_set_option</a></li>
  <li><a href="function.stream-context-set-params.html">stream_context_set_params</a></li>
  <li><a href="function.stream-copy-to-stream.html">stream_copy_to_stream</a></li>
  <li><a href="function.stream-encoding.html">stream_encoding</a></li>
  <li><a href="function.stream-filter-append.html">stream_filter_append</a></li>
  <li><a href="function.stream-filter-prepend.html">stream_filter_prepend</a></li>
  <li><a href="function.stream-filter-register.html">stream_filter_register</a></li>
  <li><a href="function.stream-filter-remove.html">stream_filter_remove</a></li>
  <li><a href="function.stream-get-contents.html">stream_get_contents</a></li>
  <li><a href="function.stream-get-filters.html">stream_get_filters</a></li>
  <li><a href="function.stream-get-line.html">stream_get_line</a></li>
  <li><a href="function.stream-get-meta-data.html">stream_get_meta_data</a></li>
  <li><a href="function.stream-get-transports.html">stream_get_transports</a></li>
  <li><a href="function.stream-get-wrappers.html">stream_get_wrappers</a></li>
  <li><a href="function.stream-is-local.html">stream_is_local</a></li>
  <li><a href="function.stream-notification-callback.html">stream_notification_callback</a></li>
  <li><a href="function.stream-register-wrapper.html">stream_register_wrapper</a></li>
  <li><a href="function.stream-resolve-include-path.html">stream_resolve_include_path</a></li>
  <li><a href="function.stream-select.html">stream_select</a></li>
  <li><a href="function.stream-set-blocking.html">stream_set_blocking</a></li>
  <li><a href="function.stream-set-chunk-size.html">stream_set_chunk_size</a></li>
  <li><a href="function.stream-set-read-buffer.html">stream_set_read_buffer</a></li>
  <li class="active"><a href="function.stream-set-timeout.html">stream_set_timeout</a></li>
  <li><a href="function.stream-set-write-buffer.html">stream_set_write_buffer</a></li>
  <li><a href="function.stream-socket-accept.html">stream_socket_accept</a></li>
  <li><a href="function.stream-socket-client.html">stream_socket_client</a></li>
  <li><a href="function.stream-socket-enable-crypto.html">stream_socket_enable_crypto</a></li>
  <li><a href="function.stream-socket-get-name.html">stream_socket_get_name</a></li>
  <li><a href="function.stream-socket-pair.html">stream_socket_pair</a></li>
  <li><a href="function.stream-socket-recvfrom.html">stream_socket_recvfrom</a></li>
  <li><a href="function.stream-socket-sendto.html">stream_socket_sendto</a></li>
  <li><a href="function.stream-socket-server.html">stream_socket_server</a></li>
  <li><a href="function.stream-socket-shutdown.html">stream_socket_shutdown</a></li>
  <li><a href="function.stream-supports-lock.html">stream_supports_lock</a></li>
  <li><a href="function.stream-wrapper-register.html">stream_wrapper_register</a></li>
  <li><a href="function.stream-wrapper-restore.html">stream_wrapper_restore</a></li>
  <li><a href="function.stream-wrapper-unregister.html">stream_wrapper_unregister</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="function.stream-set-read-buffer.html">stream_set_read_buffer</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="function.stream-set-write-buffer.html">stream_set_write_buffer</a></div>
                <div class="up"><a href="ref.stream.html">Stream Functions</a></div>
                <div class="home"><a href="index.html">PHP Manual</a></div>
            </div><hr/>
<div id="function.stream-set-timeout" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">stream_set_timeout</h1>
  <p class="refpurpose">Set timeout period on a stream</p>
 </div>
 <div class="refsect1 description" id="refsect1-function.stream-set-timeout-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname">stream_set_timeout</span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$stream</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$seconds</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$microseconds</code><span class="initializer"> = 0</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Sets the timeout value on <code class="parameter">stream</code>,
   expressed in the sum of <code class="parameter">seconds</code> and
   <code class="parameter">microseconds</code>. 
  </p>
  <p class="para">
   When the stream times out, the &#039;timed_out&#039; key of the array returned by
   <span class="function">stream_get_meta_data</span> is set to <strong><code>TRUE</code></strong>, although no
   error/warning is generated.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.stream-set-timeout-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">stream</code></dt>

     <dd>

      <p class="para">
       The target stream.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">seconds</code></dt>

     <dd>

      <p class="para">
       The seconds part of the timeout to be set.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">microseconds</code></dt>

     <dd>

      <p class="para">
       The microseconds part of the timeout to be set.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.stream-set-timeout-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>

 
 <div class="refsect1 changelog" id="refsect1-function.stream-set-timeout-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>4.3.0</td>
       <td>
        As of PHP 4.3, this function can (potentially) work on any kind of
        stream.  In PHP 4.3, socket based streams are still the only kind
        supported in the PHP core, although streams from other extensions
        may support this function.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.stream-set-timeout-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4621">
    <p><strong>Example #1 <span class="function">stream_set_timeout</span> example</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fsockopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"www.example.com"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">80</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$fp</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Unable&nbsp;to&nbsp;open\n"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"GET&nbsp;/&nbsp;HTTP/1.0\r\n\r\n"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">stream_set_timeout</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2000</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$info&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">stream_get_meta_data</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$info</span><span style="color: #007700">[</span><span style="color: #DD0000">'timed_out'</span><span style="color: #007700">])&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Connection&nbsp;timed&nbsp;out!'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-function.stream-set-timeout-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    This function doesn&#039;t work with advanced operations like
    <span class="function">stream_socket_recvfrom</span>, use
    <span class="function">stream_select</span> with timeout parameter instead.
   </p>
  </p></blockquote>
  <p class="para">
   This function was previously called as
   <span class="function">set_socket_timeout</span> and later
   <span class="function">socket_set_timeout</span> but this usage is deprecated.
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.stream-set-timeout-seealso">
  <h3 class="title">See Also</h3>
  <ul class="simplelist">
   <li class="member"><span class="function">fsockopen</span></li>
   <li class="member"><span class="function">fopen</span></li>
  </ul>
 </div>

</div>
        </td>
    </tr>
</table>
</body>
</html>
