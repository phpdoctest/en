<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP Manual: Files which make up an extension</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP Manual</a></li>
  <li class="header up"><a href="internals2.html">PHP at the Core: A Hacker's Guide</a></li>
  <li class="header up"><a href="internals2.structure.html">Extension structure</a></li>
  <li class="active"><a href="internals2.structure.files.html">Files which make up an extension</a></li>
  <li><a href="internals2.structure.basics.html">Basic constructs</a></li>
  <li><a href="internals2.structure.modstruct.html">The zend_module structure</a></li>
  <li><a href="internals2.structure.globals.html">Extension globals</a></li>
  <li><a href="internals2.structure.lifecycle.html">Life cycle of an extension</a></li>
  <li><a href="internals2.structure.tests.html">Testing an extension</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="internals2.structure.html">Extension structure</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="internals2.structure.basics.html">Basic constructs</a></div>
                <div class="up"><a href="internals2.structure.html">Extension structure</a></div>
                <div class="home"><a href="index.html">PHP Manual</a></div>
            </div><hr/>
<div id="internals2.structure.files" class="sect1">
  <h2 class="title">Files which make up an extension</h2>
  <p class="para">
   Whether created by hand, using <strong class="command">ext_skel</strong>, or by an
   alternate extension generator, such as
   <a href="http://codegenerators.php-baustelle.de/" class="link external">&raquo;&nbsp;CodeGen</a>,
   all extensions will have at least four files:
  </p>

  <dl>

   
    <dt>
<var class="filename">config.m4</var></dt>

    <dd>

     <p class="para">
      UNIX build system configuration (see
      <a href="internals2.buildsys.configunix.html" class="xref">Talking to the UNIX build system: config.m4</a>)
     </p>
    </dd>

   

   
    <dt>
<var class="filename">config.w32</var></dt>

    <dd>

     <p class="para">
      Windows buildsystem configuration (see
      <a href="internals2.buildsys.configwin.html" class="xref">Talking to the Windows build system: config.w32</a>)
     </p>
    </dd>

   
   
   
    <dt>
<var class="filename">php_counter.h</var></dt>

    <dd>

     <p class="para">
      When building an extension as static module into the PHP binary the
      build system expects a header file with <em>php_</em>
      prepended to the extension name which includes a declaration for a
      pointer to the extension&#039;s module structure. This file usually contains
      additional macros, prototypes, and globals, just like any header.
     </p>
    </dd>

   
   
   
    <dt>
<var class="filename">counter.c</var></dt>

    <dd>

     <p class="para">
      Main extension source file. By convention, the name of this file
      is the extension name, but this is not a requirement. This file
      contains the module structure declaration, INI entries, management
      functions, userspace functions, and other requirements of an extension.
     </p>
    </dd>

   
  </dl>

  
  <p class="para">
   The buildsystem files are discussed elsewhere; this section concentrates on
   the rest. These four files make up the bare minimum for an extension, which
   may also contain any number of headers, source files, unit tests, and other
   support files. The list of files in the counter extension might look like
   this:
  </p>
  
  <div class="example" id="example-6413">
   <p><strong>Example #1 Files in the counter extension, in no particular order</strong></p>
   <div class="example-contents screen">
<div class="cdata"><pre>
ext/
 counter/
  .svnignore
  config.m4
  config.w32
  counter_util.h
  counter_util.c
  php_counter.h
  counter.c
  package.xml
  CREDITS
  tests/
   critical_function_001.phpt
   critical_function_002.phpt
   optional_function_001.phpt
   optional_function_002.phpt
</pre></div>
   </div>
  </div> 
  
  <div class="sect2" id="internals2.structure.files.misc-files">
   <h3 class="title">Non-source files</h3>
   <p class="para">
    The <var class="filename">.svnignore</var> file is used for extensions which are
    checked into the PHP <strong class="command">Subversion</strong> repository (usually
    <a href="http://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a>); the one generated by <strong class="command">ext_skel</strong> contains:
   </p>
  
   <div class="informalexample">
    <div class="example-contents">
<div class="svnignorecode"><pre class="svnignorecode">.deps
*.lo
*.la</pre>
</div>
    </div>

   </div>
  
   <p class="para">
    These lines tell <strong class="command">Subversion</strong> to ignore interim files generated
    by the PHP buildsystem. This is only a convenience, and can be omitted
    completely without ill effect.
   </p>
   
   <p class="para">
    The <var class="filename">CREDITS</var> file lists the contributors and/or
    maintainers of the extension in plain text format. The main purpose of 
    this file is generating the credits information for bundled extensions as
    used by <span class="function">phpcredits</span>. By convention the first line of
    the file should hold the name of the extension, the second a comma 
    separated list of contributors. The contributors are usually ordered by the
    chronological order of their contributions. In a <a href="http://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a> package,
    this information is already maintained in <var class="filename">package.xml</var>,
    for example. This is another file which can be omitted without ill effect.
   </p>
   
   <p class="para">
    The <var class="filename">package.xml</var> file is specific to <a href="http://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a>-based
    extensions; it is a metainformation file which gives details about an
    extension&#039;s dependencies, authors, installation requirements, and other
    tidbits. In an extension not being hosted in <a href="http://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a>, this file is
    extraneous.
   </p>
  </div>
  
 </div>
        </td>
    </tr>
</table>
</body>
</html>
