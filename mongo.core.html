<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP Manual: Core Classes</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP Manual</a></li>
  <li class="header up"><a href="funcref.html">Function Reference</a></li>
  <li class="header up"><a href="refs.database.html">Database Extensions</a></li>
  <li class="header up"><a href="refs.database.vendors.html">Vendor Specific Database Extensions</a></li>
  <li class="header up"><a href="book.mongo.html">Mongo</a></li>
  <li><a href="mongo.setup.html">Installing/Configuring</a></li>
  <li><a href="mongo.constants.html">Predefined Constants</a></li>
  <li><a href="mongo.manual.html">Manual</a></li>
  <li class="active"><a href="mongo.core.html">Core Classes</a></li>
  <li><a href="mongo.types.html">Types</a></li>
  <li><a href="mongo.gridfs.html">GridFS Classes</a></li>
  <li><a href="mongo.batch.html">Batch Classes</a></li>
  <li><a href="mongo.miscellaneous.html">Miscellaneous</a></li>
  <li><a href="ref.mongo.html">Mongo Functions</a></li>
  <li><a href="mongo.exceptions.html">Exceptions</a></li>
  <li><a href="changelog.mongo.html">Changelog</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="mongo.testing.html">Running the Driver's Tests</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="class.mongoclient.html">MongoClient</a></div>
                <div class="up"><a href="book.mongo.html">Mongo</a></div>
                <div class="home"><a href="index.html">PHP Manual</a></div>
            </div><hr/>
<div id="mongo.core" class="part">

 <h1>Core Classes</h1><strong>Table of Contents</strong><ul class="chunklist chunklist_title">
<li><a href="class.mongoclient.html">MongoClient</a> — The MongoClient class<ul class="chunklist chunklist_title">
<li><a href="mongoclient.close.html">MongoClient::close</a> — Closes this connection</li>
<li><a href="mongoclient.connect.html">MongoClient::connect</a> — Connects to a database server</li>
<li><a href="mongoclient.construct.html">MongoClient::__construct</a> — Creates a new database connection object</li>
<li><a href="mongoclient.dropdb.html">MongoClient::dropDB</a> — Drops a database [deprecated]</li>
<li><a href="mongoclient.get.html">MongoClient::__get</a> — Gets a database</li>
<li><a href="mongoclient.getconnections.html">MongoClient::getConnections</a> — Return info about all open connections</li>
<li><a href="mongoclient.gethosts.html">MongoClient::getHosts</a> — Updates status for all associated hosts</li>
<li><a href="mongoclient.getreadpreference.html">MongoClient::getReadPreference</a> — Get the read preference for this connection</li>
<li><a href="mongoclient.getwriteconcern.html">MongoClient::getWriteConcern</a> — Get the write concern for this connection</li>
<li><a href="mongoclient.killcursor.html">MongoClient::killCursor</a> — Kills a specific cursor on the server</li>
<li><a href="mongoclient.listdbs.html">MongoClient::listDBs</a> — Lists all of the databases available.</li>
<li><a href="mongoclient.selectcollection.html">MongoClient::selectCollection</a> — Gets a database collection</li>
<li><a href="mongoclient.selectdb.html">MongoClient::selectDB</a> — Gets a database</li>
<li><a href="mongoclient.setreadpreference.html">MongoClient::setReadPreference</a> — Set the read preference for this connection</li>
<li><a href="mongoclient.setwriteconcern.html">MongoClient::setWriteConcern</a> — Set the write concern for this connection</li>
<li><a href="mongoclient.tostring.html">MongoClient::__toString</a> — String representation of this connection</li>
</ul>
</li>
<li><a href="class.mongodb.html">MongoDB</a> — The MongoDB class<ul class="chunklist chunklist_title">
<li><a href="mongodb.authenticate.html">MongoDB::authenticate</a> — Log in to this database</li>
<li><a href="mongodb.command.html">MongoDB::command</a> — Execute a database command</li>
<li><a href="mongodb.construct.html">MongoDB::__construct</a> — Creates a new database</li>
<li><a href="mongodb.createcollection.html">MongoDB::createCollection</a> — Creates a collection</li>
<li><a href="mongodb.createdbref.html">MongoDB::createDBRef</a> — Creates a database reference</li>
<li><a href="mongodb.drop.html">MongoDB::drop</a> — Drops this database</li>
<li><a href="mongodb.dropcollection.html">MongoDB::dropCollection</a> — Drops a collection [deprecated]</li>
<li><a href="mongodb.execute.html">MongoDB::execute</a> — Runs JavaScript code on the database server [deprecated]</li>
<li><a href="mongodb.forceerror.html">MongoDB::forceError</a> — Creates a database error</li>
<li><a href="mongodb.get.html">MongoDB::__get</a> — Gets a collection</li>
<li><a href="mongodb.getcollectioninfo.html">MongoDB::getCollectionInfo</a> — Returns information about collections in this database</li>
<li><a href="mongodb.getcollectionnames.html">MongoDB::getCollectionNames</a> — Gets an array of names for all collections in this database</li>
<li><a href="mongodb.getdbref.html">MongoDB::getDBRef</a> — Fetches the document pointed to by a database reference</li>
<li><a href="mongodb.getgridfs.html">MongoDB::getGridFS</a> — Fetches toolkit for dealing with files stored in this database</li>
<li><a href="mongodb.getprofilinglevel.html">MongoDB::getProfilingLevel</a> — Gets this database's profiling level</li>
<li><a href="mongodb.getreadpreference.html">MongoDB::getReadPreference</a> — Get the read preference for this database</li>
<li><a href="mongodb.getslaveokay.html">MongoDB::getSlaveOkay</a> — Get slaveOkay setting for this database</li>
<li><a href="mongodb.getwriteconcern.html">MongoDB::getWriteConcern</a> — Get the write concern for this database</li>
<li><a href="mongodb.lasterror.html">MongoDB::lastError</a> — Check if there was an error on the most recent db operation performed</li>
<li><a href="mongodb.listcollections.html">MongoDB::listCollections</a> — Gets an array of MongoCollection objects for all collections in this database</li>
<li><a href="mongodb.preverror.html">MongoDB::prevError</a> — Checks for the last error thrown during a database operation</li>
<li><a href="mongodb.repair.html">MongoDB::repair</a> — Repairs and compacts this database</li>
<li><a href="mongodb.reseterror.html">MongoDB::resetError</a> — Clears any flagged errors on the database</li>
<li><a href="mongodb.selectcollection.html">MongoDB::selectCollection</a> — Gets a collection</li>
<li><a href="mongodb.setprofilinglevel.html">MongoDB::setProfilingLevel</a> — Sets this database's profiling level</li>
<li><a href="mongodb.setreadpreference.html">MongoDB::setReadPreference</a> — Set the read preference for this database</li>
<li><a href="mongodb.setslaveokay.html">MongoDB::setSlaveOkay</a> — Change slaveOkay setting for this database</li>
<li><a href="mongodb.setwriteconcern.html">MongoDB::setWriteConcern</a> — Set the write concern for this database</li>
<li><a href="mongodb.--tostring.html">MongoDB::__toString</a> — The name of this database</li>
</ul>
</li>
<li><a href="class.mongocollection.html">MongoCollection</a> — The MongoCollection class<ul class="chunklist chunklist_title">
<li><a href="mongocollection.aggregate.html">MongoCollection::aggregate</a> — Perform an aggregation using the aggregation framework</li>
<li><a href="mongocollection.aggregatecursor.html">MongoCollection::aggregateCursor</a> — Execute an aggregation pipeline command and retrieve results through a cursor</li>
<li><a href="mongocollection.batchinsert.html">MongoCollection::batchInsert</a> — Inserts multiple documents into this collection</li>
<li><a href="mongocollection.construct.html">MongoCollection::__construct</a> — Creates a new collection</li>
<li><a href="mongocollection.count.html">MongoCollection::count</a> — Counts the number of documents in this collection</li>
<li><a href="mongocollection.createdbref.html">MongoCollection::createDBRef</a> — Creates a database reference</li>
<li><a href="mongocollection.createindex.html">MongoCollection::createIndex</a> — Creates an index on the specified field(s) if it does not already exist.</li>
<li><a href="mongocollection.deleteindex.html">MongoCollection::deleteIndex</a> — Deletes an index from this collection</li>
<li><a href="mongocollection.deleteindexes.html">MongoCollection::deleteIndexes</a> — Delete all indices for this collection</li>
<li><a href="mongocollection.distinct.html">MongoCollection::distinct</a> — Retrieve a list of distinct values for the given key across a collection.</li>
<li><a href="mongocollection.drop.html">MongoCollection::drop</a> — Drops this collection</li>
<li><a href="mongocollection.ensureindex.html">MongoCollection::ensureIndex</a> — Creates an index on the specified field(s) if it does not already exist.</li>
<li><a href="mongocollection.find.html">MongoCollection::find</a> — Queries this collection, returning a MongoCursor
  for the result set</li>
<li><a href="mongocollection.findandmodify.html">MongoCollection::findAndModify</a> — Update a document and return it</li>
<li><a href="mongocollection.findone.html">MongoCollection::findOne</a> — Queries this collection, returning a single element</li>
<li><a href="mongocollection.get.html">MongoCollection::__get</a> — Gets a collection</li>
<li><a href="mongocollection.getdbref.html">MongoCollection::getDBRef</a> — Fetches the document pointed to by a database reference</li>
<li><a href="mongocollection.getindexinfo.html">MongoCollection::getIndexInfo</a> — Returns information about indexes on this collection</li>
<li><a href="mongocollection.getname.html">MongoCollection::getName</a> — Returns this collection's name</li>
<li><a href="mongocollection.getreadpreference.html">MongoCollection::getReadPreference</a> — Get the read preference for this collection</li>
<li><a href="mongocollection.getslaveokay.html">MongoCollection::getSlaveOkay</a> — Get slaveOkay setting for this collection</li>
<li><a href="mongocollection.getwriteconcern.html">MongoCollection::getWriteConcern</a> — Get the write concern for this collection</li>
<li><a href="mongocollection.group.html">MongoCollection::group</a> — Performs an operation similar to SQL's GROUP BY command</li>
<li><a href="mongocollection.insert.html">MongoCollection::insert</a> — Inserts a document into the collection</li>
<li><a href="mongocollection.parallelcollectionscan.html">MongoCollection::parallelCollectionScan</a> — Returns an array of cursors to iterator over a full collection in parallel</li>
<li><a href="mongocollection.remove.html">MongoCollection::remove</a> — Remove records from this collection</li>
<li><a href="mongocollection.save.html">MongoCollection::save</a> — Saves a document to this collection</li>
<li><a href="mongocollection.setreadpreference.html">MongoCollection::setReadPreference</a> — Set the read preference for this collection</li>
<li><a href="mongocollection.setslaveokay.html">MongoCollection::setSlaveOkay</a> — Change slaveOkay setting for this collection</li>
<li><a href="mongocollection.setwriteconcern.html">MongoCollection::setWriteConcern</a> — Set the write concern for this database</li>
<li><a href="mongocollection.toindexstring.html">MongoCollection::toIndexString</a> — Converts keys specifying an index to its identifying string</li>
<li><a href="mongocollection.--tostring.html">MongoCollection::__toString</a> — String representation of this collection</li>
<li><a href="mongocollection.update.html">MongoCollection::update</a> — Update records based on a given criteria</li>
<li><a href="mongocollection.validate.html">MongoCollection::validate</a> — Validates this collection</li>
</ul>
</li>
<li><a href="class.mongocursor.html">MongoCursor</a> — The MongoCursor class<ul class="chunklist chunklist_title">
<li><a href="mongocursor.addoption.html">MongoCursor::addOption</a> — Adds a top-level key/value pair to a query</li>
<li><a href="mongocursor.awaitdata.html">MongoCursor::awaitData</a> — Sets whether this cursor will wait for a while for a tailable cursor to return more data</li>
<li><a href="mongocursor.batchsize.html">MongoCursor::batchSize</a> — Limits the number of elements returned in one batch.</li>
<li><a href="mongocursor.construct.html">MongoCursor::__construct</a> — Create a new cursor</li>
<li><a href="mongocursor.count.html">MongoCursor::count</a> — Counts the number of results for this query</li>
<li><a href="mongocursor.current.html">MongoCursor::current</a> — Returns the current element</li>
<li><a href="mongocursor.dead.html">MongoCursor::dead</a> — Checks if there are results that have not yet been sent from the database</li>
<li><a href="mongocursor.doquery.html">MongoCursor::doQuery</a> — Execute the query.</li>
<li><a href="mongocursor.explain.html">MongoCursor::explain</a> — Return an explanation of the query, often useful for optimization and debugging</li>
<li><a href="mongocursor.fields.html">MongoCursor::fields</a> — Sets the fields for a query</li>
<li><a href="mongocursor.getnext.html">MongoCursor::getNext</a> — Advances the cursor to the next result, and returns that result</li>
<li><a href="mongocursor.getreadpreference.html">MongoCursor::getReadPreference</a> — Get the read preference for this query</li>
<li><a href="mongocursor.hasnext.html">MongoCursor::hasNext</a> — Checks if there are any more elements in this cursor</li>
<li><a href="mongocursor.hint.html">MongoCursor::hint</a> — Gives the database a hint about the query</li>
<li><a href="mongocursor.immortal.html">MongoCursor::immortal</a> — Sets whether this cursor will timeout</li>
<li><a href="mongocursor.info.html">MongoCursor::info</a> — Gets information about the cursor's creation and iteration</li>
<li><a href="mongocursor.key.html">MongoCursor::key</a> — Returns the current result's _id, or its index within the result set</li>
<li><a href="mongocursor.limit.html">MongoCursor::limit</a> — Limits the number of results returned</li>
<li><a href="mongocursor.maxtimems.html">MongoCursor::maxTimeMS</a> — Sets a server-side timeout for this query</li>
<li><a href="mongocursor.next.html">MongoCursor::next</a> — Advances the cursor to the next result, and returns that result</li>
<li><a href="mongocursor.partial.html">MongoCursor::partial</a> — If this query should fetch partial results from mongos if a shard is down</li>
<li><a href="mongocursor.reset.html">MongoCursor::reset</a> — Clears the cursor</li>
<li><a href="mongocursor.rewind.html">MongoCursor::rewind</a> — Returns the cursor to the beginning of the result set</li>
<li><a href="mongocursor.setflag.html">MongoCursor::setFlag</a> — Sets arbitrary flags in case there is no method available the specific flag</li>
<li><a href="mongocursor.setreadpreference.html">MongoCursor::setReadPreference</a> — Set the read preference for this query</li>
<li><a href="mongocursor.skip.html">MongoCursor::skip</a> — Skips a number of results</li>
<li><a href="mongocursor.slaveokay.html">MongoCursor::slaveOkay</a> — Sets whether this query can be done on a secondary [deprecated]</li>
<li><a href="mongocursor.snapshot.html">MongoCursor::snapshot</a> — Use snapshot mode for the query</li>
<li><a href="mongocursor.sort.html">MongoCursor::sort</a> — Sorts the results by given fields</li>
<li><a href="mongocursor.tailable.html">MongoCursor::tailable</a> — Sets whether this cursor will be left open after fetching the last results</li>
<li><a href="mongocursor.timeout.html">MongoCursor::timeout</a> — Sets a client-side timeout for this query</li>
<li><a href="mongocursor.valid.html">MongoCursor::valid</a> — Checks if the cursor is reading a valid result.</li>
</ul>
</li>
<li><a href="class.mongocursorinterface.html">MongoCursorInterface</a> — The MongoCursorInterface interface<ul class="chunklist chunklist_title">
<li><a href="mongocursorinterface.batchsize.html">MongoCursorInterface::batchSize</a> — Limits the number of elements returned in one batch.</li>
<li><a href="mongocursorinterface.dead.html">MongoCursorInterface::dead</a> — Checks if there are results that have not yet been sent from the database</li>
<li><a href="mongocursorinterface.getreadpreference.html">MongoCursorInterface::getReadPreference</a> — Get the read preference for this query</li>
<li><a href="mongocursorinterface.info.html">MongoCursorInterface::info</a> — Gets information about the cursor's creation and iteration</li>
<li><a href="mongocursorinterface.setreadpreference.html">MongoCursorInterface::setReadPreference</a> — Set the read preference for this query</li>
<li><a href="mongocursorinterface.timeout.html">MongoCursorInterface::timeout</a> — Sets a client-side timeout for this query</li>
</ul>
</li>
<li><a href="class.mongocommandcursor.html">MongoCommandCursor</a> — The MongoCommandCursor class<ul class="chunklist chunklist_title">
<li><a href="mongocommandcursor.batchsize.html">MongoCommandCursor::batchSize</a> — Limits the number of elements returned in one batch.</li>
<li><a href="mongocommandcursor.construct.html">MongoCommandCursor::__construct</a> — Create a new command cursor</li>
<li><a href="mongocommandcursor.createfromdocument.html">MongoCommandCursor::createFromDocument</a> — Create a new command cursor from an existing command response document</li>
<li><a href="mongocommandcursor.current.html">MongoCommandCursor::current</a> — Returns the current element</li>
<li><a href="mongocommandcursor.dead.html">MongoCommandCursor::dead</a> — Checks if there are results that have not yet been sent from the database</li>
<li><a href="mongocommandcursor.getreadpreference.html">MongoCommandCursor::getReadPreference</a> — Get the read preference for this command</li>
<li><a href="mongocommandcursor.info.html">MongoCommandCursor::info</a> — Gets information about the cursor's creation and iteration</li>
<li><a href="mongocommandcursor.key.html">MongoCommandCursor::key</a> — Returns the current result's index within the result set</li>
<li><a href="mongocommandcursor.next.html">MongoCommandCursor::next</a> — Advances the cursor to the next result</li>
<li><a href="mongocommandcursor.rewind.html">MongoCommandCursor::rewind</a> — Executes the command and resets the cursor to the start of the result set</li>
<li><a href="mongocommandcursor.setreadpreference.html">MongoCommandCursor::setReadPreference</a> — Set the read preference for this command</li>
<li><a href="mongocommandcursor.timeout.html">MongoCommandCursor::timeout</a> — Sets a client-side timeout for this command</li>
<li><a href="mongocommandcursor.valid.html">MongoCommandCursor::valid</a> — Checks if the cursor is reading a valid result.</li>
</ul>
</li>
</ul>

 <div class="partintro">
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">This extension is deprecated. Instead,
the <a href="set.mongodb.html" class="link">MongoDB</a> extension should be
used.</p>
  </div>
  <p class="para">
   The core classes are the most important part of the driver.
  </p>
 </div>

 




 <h1 class="title">The MongoClient class</h1>
 

 <div class="partintro">
  

  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">This extension that defines this class
is deprecated. Instead, the <a href="set.mongodb.html" class="link">MongoDB</a> extension should be used.
Alternatives to this class include:</p>
   <ul class="simplelist">
    <li class="member"><span class="classname">MongoDB\Driver\Manager</span></li>
   </ul>
  </div>

  <div class="section" id="mongoclient.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    A connection manager for PHP and MongoDB.
   </p>
   <p class="para">
    This class is used to create and manage connections. A typical use is:
    <div class="example" id="mongo.connecting.rs-example-correct-replset">
     <p><strong>Example #1 <span class="classname">MongoClient</span> basic usage</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;connect<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;get&nbsp;the&nbsp;database&nbsp;named&nbsp;"foo"<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    See <span class="function">MongoClient::__construct</span> and the section on
    <a href="mongo.connecting.html" class="link">connecting</a> for more information
    about creating connections.
   </p>
  </div>
  

  <div class="section" id="mongoclient.synopsis">
   <h2 class="title">Class synopsis</h2>

   
   <div class="classsynopsis">
    <div class="ooclass"><strong class="classname">MongoClient</strong></div>

    
    <div class="classsynopsisinfo">
     <span class="ooclass">
       class <strong class="classname">MongoClient</strong>
     </span>
     {</div>
    

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
     <var class="fieldsynopsis_varname">MongoClient::VERSION</var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
     <var class="fieldsynopsis_varname">MongoClient::DEFAULT_HOST</var>
     <span class="initializer"> = &quot;localhost&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">int</span>
     <var class="fieldsynopsis_varname">MongoClient::DEFAULT_PORT</var>
     <span class="initializer"> = 27017</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
     <var class="fieldsynopsis_varname">MongoClient::RP_PRIMARY</var>
     <span class="initializer"> = &quot;primary&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
     <var class="fieldsynopsis_varname">MongoClient::RP_PRIMARY_PREFERRED</var>
     <span class="initializer"> = &quot;primaryPreferred&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
     <var class="fieldsynopsis_varname">MongoClient::RP_SECONDARY</var>
     <span class="initializer"> = &quot;secondary&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
     <var class="fieldsynopsis_varname">MongoClient::RP_SECONDARY_PREFERRED</var>
     <span class="initializer"> = &quot;secondaryPreferred&quot;</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">string</span>
     <var class="fieldsynopsis_varname">MongoClient::RP_NEAREST</var>
     <span class="initializer"> = &quot;nearest&quot;</span>
    ;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Properties */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">boolean</span>
     <var class="varname">$connected</var>
     <span class="initializer"> = <strong><code>FALSE</code></strong></span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">string</span>
     <var class="varname">$status</var>
     <span class="initializer"> = <strong><code>NULL</code></strong></span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">protected</span>
     <span class="type">string</span>
     <var class="varname">$server</var>
     <span class="initializer"> = <strong><code>NULL</code></strong></span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">protected</span>
     <span class="type">boolean</span>
     <var class="varname">$persistent</var>
     <span class="initializer"> = <strong><code>NULL</code></strong></span>
    ;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span>  <span class="methodname">__construct</span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$server</code><span class="initializer"> = &quot;mongodb://localhost:27017&quot;</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array(&quot;connect&quot; =&gt; <strong><code>TRUE</code></strong>)</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$driver_options</code></span>
  ]]] )</div>

    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">close</span>
    ([ <span class="methodparam"><span class="type">boolean|string</span> <code class="parameter">$connection</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">connect</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">dropDB</span>
    ( <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$db</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoDB</span> <span class="methodname">__get</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$dbname</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">array</span> <span class="methodname">getConnections</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getHosts</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getReadPreference</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getWriteConcern</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">killCursor</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$server_hash</code></span>
   , <span class="methodparam"><span class="type">int|MongoInt64</span> <code class="parameter">$id</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">listDBs</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCollection</span> <span class="methodname">selectCollection</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$db</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoDB</span> <span class="methodname">selectDB</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">setReadPreference</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">setWriteConcern</span>
    ( <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$w</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname">__toString</span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>
   

  </div>


  <div class="section" id="mongoclient.constants">
   <h2 class="title">Predefined Constants</h2>
   <div class="section" id="mongoclient.constants.types">
    <h2 class="title">MongoClient Constants</h2>
    <dl>

     
      <dt id="mongoclient.constants.version"><strong><code>MongoClient::VERSION</code></strong></dt>

      <dd>

       <span class="simpara">
        PHP driver version. May be suffixed with &quot;dev&quot;, &quot;+&quot; or &quot;-&quot; if it is
        in-between versions.
       </span>
      </dd>

     
     
      <dt id="mongoclient.constants.defaulthost"><strong><code>MongoClient::DEFAULT_HOST</code></strong></dt>

      <dt>
<strong><code>&quot;localhost&quot;</code></strong></dt>

      <dd>

       <span class="simpara">
        Host to connect to if no host is given.
       </span>
      </dd>

     
     
      <dt id="mongoclient.constants.defaultport"><strong><code>MongoClient::DEFAULT_PORT</code></strong></dt>

      <dt>
<strong><code>27017</code></strong></dt>

      <dd>

       <span class="simpara">
        Port to connect to if no port is given.
       </span>
      </dd>

     
     
      <dt id="mongoclient.constants.rpprimary"><strong><code>MongoClient::RP_PRIMARY</code></strong></dt>

      <dt>
<strong><code>&quot;primary&quot;</code></strong></dt>

      <dd>

       <span class="simpara">
        <a href="mongo.readpreferences.html" class="link">Read preference</a> for the
        primary replica set member.
       </span>
      </dd>

     
     
      <dt id="mongoclient.constants.rpprimarypreferred"><strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong></dt>

      <dt>
<strong><code>&quot;primaryPreferred&quot;</code></strong></dt>

      <dd>

       <span class="simpara">
        <a href="mongo.readpreferences.html" class="link">Read preference</a> for
        preferring the primary replica set member.
       </span>
      </dd>

     
     
      <dt id="mongoclient.constants.rpsecondary"><strong><code>MongoClient::RP_SECONDARY</code></strong></dt>

      <dt>
<strong><code>&quot;secondary&quot;</code></strong></dt>

      <dd>

       <span class="simpara">
        <a href="mongo.readpreferences.html" class="link">Read preference</a> for a
        secondary replica set member.
       </span>
      </dd>

     
     
      <dt id="mongoclient.constants.rpsecondarypreferred"><strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong></dt>

      <dt>
<strong><code>&quot;secondaryPreferred&quot;</code></strong></dt>

      <dd>

       <span class="simpara">
        <a href="mongo.readpreferences.html" class="link">Read preference</a> for
        preferring a secondary replica set member.
       </span>
      </dd>

     
     
      <dt id="mongoclient.constants.rpnearest"><strong><code>MongoClient::RP_NEAREST</code></strong></dt>

      <dt>
<strong><code>&quot;nearest&quot;</code></strong></dt>

      <dd>

       <span class="simpara">
        <a href="mongo.readpreferences.html" class="link">Read preference</a> for the
        nearest replica set member.
       </span>
      </dd>

     
    </dl>

   </div>
  </div>

  <div class="section" id="mongoclient.fields">
   <h2 class="title">Fields</h2>
   <dl>

    
     <dt id="mongoclient.props.connected"><var class="varname">connected</var></dt>

     <dd>

      <p class="para">
       This property will be set to <strong><code>TRUE</code></strong> if we have a open connection to
       the database, <strong><code>FALSE</code></strong> otherwise. If the connection is to a replica set,
       this property will only be <strong><code>TRUE</code></strong> if the driver has a connection to a
       node matching the current read preference. This property does not take
       authentication into account.
      </p>
      <p class="para">
       This property is <em class="emphasis">deprecated</em> since version 1.5.0.
      </p>
     </dd>

    
    
     <dt id="mongoclient.props.status"><var class="varname">status</var></dt>

     <dd>

      <p class="para">
       This property is no longer used and will be set to <strong><code>NULL</code></strong> In driver
       versions 1.1.x and earlier, this may be set to a string value (e.g.
       <em>&quot;recycled&quot;</em>, <em>&quot;new&quot;</em>) when persistent
       connections are used.
      </p>
      <p class="para">
       This property is <em class="emphasis">deprecated</em> since version 1.5.0.
      </p>
     </dd>

    
   </dl>

  </div>

  <div class="section" id="mongoclient.seealso">
   <h2 class="title">See Also</h2>
   <ul class="simplelist">
    <li class="member"><a href="mongo.readpreferences.html" class="xref">Read Preferences</a></li>
    <li class="member"><a href="mongo.writeconcerns.html" class="xref">Write Concerns</a></li>
    <li class="member"><a href="mongo.connecting.html" class="xref">Connecting</a></li>
    <li class="member">MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/connection-string/" class="link external">&raquo;&nbsp;connecting</a></li>
   </ul>
  </div>


 </div>

 



 





 











 





 
































 





 





 





 



















 







 




 <h1 class="title">The MongoDB class</h1>
 

 <div class="partintro">


  <div class="section" id="mongodb.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    Instances of this class are used to interact with a database.  To get a
    database:
    <div class="example" id="example-1505">
     <p><strong>Example #1 Selecting a database</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;connect<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"example"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    Database names can use almost any character in the ASCII range.  However,
    they cannot contain &quot; &quot;, &quot;.&quot; or be the empty string.
    The name &quot;system&quot; is also reserved.
   </p>
   <p class="para">
    A few unusual, but valid, database names: &quot;null&quot;, &quot;[x,y]&quot;, &quot;3&quot;, &quot;\&quot;&quot;, &quot;/&quot;.
   </p>
   <p class="para">
    Unlike collection names, database names may contain &quot;$&quot;.
   </p>
  </div>


  <div class="section" id="mongodb.synopsis">
   <h2 class="title">Class synopsis</h2>


   <div class="classsynopsis">
    <div class="ooclass"><strong class="classname">MongoDB</strong></div>


    <div class="classsynopsisinfo">
     <span class="ooclass">
       class <strong class="classname">MongoDB</strong>
     </span>
     {</div>

    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">int</span>
     <var class="fieldsynopsis_varname">MongoDB::PROFILING_OFF</var>
     <span class="initializer"> = 0</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">int</span>
     <var class="fieldsynopsis_varname">MongoDB::PROFILING_SLOW</var>
     <span class="initializer"> = 1</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">int</span>
     <var class="fieldsynopsis_varname">MongoDB::PROFILING_ON</var>
     <span class="initializer"> = 2</span>
    ;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
     <var class="varname">$w</var>
     <span class="initializer"> = 1</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
     <var class="varname">$wtimeout</var>
     <span class="initializer"> = 10000</span>
    ;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">authenticate</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">command</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$command</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter reference">&$hash</code></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>  <span class="methodname">__construct</span>
    ( <span class="methodparam"><span class="type">MongoClient</span> <code class="parameter">$conn</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCollection</span> <span class="methodname">createCollection</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">createDBRef</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
   , <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$document_or_id</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">drop</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">dropCollection</span>
    ( <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$coll</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">execute</span>
    ( <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$code</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$args</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">forceError</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCollection</span> <span class="methodname">__get</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getCollectionInfo</span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getCollectionNames</span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getDBRef</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$ref</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoGridFS</span> <span class="methodname">getGridFS</span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$prefix</code><span class="initializer"> = &quot;fs&quot;</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname">getProfilingLevel</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getReadPreference</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">getSlaveOkay</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getWriteConcern</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">lastError</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">listCollections</span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">prevError</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">repair</span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$preserve_cloned_files</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$backup_original_files</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">resetError</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCollection</span> <span class="methodname">selectCollection</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname">setProfilingLevel</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$level</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">setReadPreference</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">setSlaveOkay</span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$ok</code><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">setWriteConcern</span>
    ( <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$w</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname">__toString</span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>


  </div>

  <div class="section">
   <h2 class="title">Predefined Constants</h2>
   <div class="section" id="mongodb.constants.types">
    <h2 class="title">MongoDB Log Levels</h2>
    <dl>


     
      <dt id="mongodb.constants.profilingoff"><strong><code>MongoDB::PROFILING_OFF</code></strong></dt>

      <dt>
<strong><code>0</code></strong></dt>

      <dd>

       <span class="simpara">
        Profiling is off.
       </span>
      </dd>

     
     
      <dt id="mongodb.constants.profilingslow"><strong><code>MongoDB::PROFILING_SLOW</code></strong></dt>

      <dt>
<strong><code>1</code></strong></dt>

      <dd>

       <span class="simpara">
        Profiling is on for slow operations (&gt;100 ms).
       </span>
      </dd>

     
     
      <dt id="mongodb.constants.profilingon"><strong><code>MongoDB::PROFILING_ON</code></strong></dt>

      <dt>
<strong><code>2</code></strong></dt>

      <dd>

       <span class="simpara">
        Profiling is on for all operations.
       </span>
      </dd>

     
    </dl>

   </div>
  </div>

  <div class="section">
   <h2 class="title">Fields</h2>
   <dl>

    
     <dt id="mongodb.props.w"><var class="varname">w</var></dt>

     <dt>
1</dt>

     <dd>

      <p class="para">
       The number of servers to replicate a change to before returning success.
       Inherited by instances of <span class="classname">MongoCollection</span> derived
       from this.  <em>w</em> functionality is only available in 
       version 1.5.1+ of the MongoDB server and 1.0.8+ of the driver.
      </p>
      <p class="para">
       <em>w</em> is used whenever you need to adjust the
       acknowledgement level
       (<span class="function">MongoCollection::insert</span>, 
       <span class="function">MongoCollection::update</span>, 
       <span class="function">MongoCollection::remove</span>, 
       <span class="function">MongoCollection::save</span>, and
       <span class="function">MongoCollection::ensureIndex</span> all support this
       option). With the default value (1), an acknowledged operation will return once
       the database server has the operation. If the server goes down before
       the operation has been replicated to a secondary, it is possible to lose
       the operation forever. Thus, you can specify <em>w</em> to be
       higher than one and guarantee that at least one secondary has the
       operation before it is considered successful.
      </p>
      <p class="para">
       For example, if <em>w</em> is 2, the primary and one secondary
       must have a record of the operation or the driver will throw a
       <span class="classname">MongoCursorException</span>. It is tempting to set
       <em>w</em> to the total number of secondaries + primary, but
       then if one secondary is down the operation will fail and an exception
       will be thrown, so usually <em>w=2</em> is safest (primary and
       one secondary).
      </p>
     </dd>

    
    
     <dt id="mongodb.props.wtimeout"><var class="varname">wtimeout</var></dt>

     <dt>
10000</dt>

     <dd>

      <p class="para">
       The number of milliseconds to wait for <em>MongoDB::$w</em> 
       replications to take place.  Inherited by instances of
       <span class="classname">MongoCollection</span> derived from this. 
       <em>w</em> functionality is only available in version 1.5.1+ of
       the MongoDB server and 1.0.8+ of the driver.
      </p>
      <p class="para">
       Unless <em>wtimeout</em> is set, the server waits forever for 
       replicating to <em>w</em> servers to finish.  The driver 
       defaults to waiting for 10 seconds, you can change this value to alter
       its behavior.
      </p>
     </dd>

    
   </dl>

  </div>

  <div class="section">
   <h2 class="title">See Also</h2>
   <p class="para">
    MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/glossary/#term-database" class="link external">&raquo;&nbsp;databases</a>.
   </p>
  </div>
 </div>

 









 





 





 





 





 





 





 





 





 





 












 





 





 












 












 





  





 





 





 





 





 












 












 







 




 <h1 class="title">The MongoCollection class</h1>
 

 <div class="partintro">


  <div class="section" id="mongocollection.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    Represents a MongoDB collection.
   </p>
   <p class="para">
    Collection names can use any character in the ASCII set.  Some valid 
    collection names are &quot;&quot;, &quot;...&quot;, 
    &quot;my collection&quot;, and &quot;*&amp;#@&quot;.
   </p>
   <p class="para">
    User-defined collection names cannot contain the $ symbol.  There are 
    certain system collections which use a $ in their names (e.g., 
    local.oplog.$main), but it is a reserved character.  If you attempt to 
    create and use a collection with a $ in the name, MongoDB will assert.
   </p>
  </div>


  <div class="section" id="mongocollection.synopsis">
   <h2 class="title">Class synopsis</h2>


   <div class="classsynopsis">
    <div class="ooclass"><strong class="classname">MongoCollection</strong></div>


    <div class="classsynopsisinfo">
     <span class="ooclass">
       class <strong class="classname">MongoCollection</strong>
     </span>
     {</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>
    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">int</span>
     <var class="fieldsynopsis_varname">MongoCollection::ASCENDING</var>
     <span class="initializer"> = 1</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">int</span>
     <var class="fieldsynopsis_varname">MongoCollection::DESCENDING</var>
     <span class="initializer"> = -1</span>
    ;</div>

    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Fields */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">MongoDB</span>
     <var class="varname">$db</var>
     <span class="initializer"> = <strong><code>NULL</code></strong></span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
     <var class="varname">$w</var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
     <var class="varname">$wtimeout</var>
    ;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">aggregate</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$pipeline</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCommandCursor</span> <span class="methodname">aggregateCursor</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$command</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">mixed</span> <span class="methodname">batchInsert</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$a</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>  <span class="methodname">__construct</span>
    ( <span class="methodparam"><span class="type">MongoDB</span> <code class="parameter">$db</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname">count</span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">createDBRef</span>
    ( <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$document_or_id</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">createIndex</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$keys</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">deleteIndex</span>
    ( <span class="methodparam"><span class="type">string|array</span> <code class="parameter">$keys</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">deleteIndexes</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">distinct</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$key</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">drop</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">ensureIndex</span>
    ( <span class="methodparam"><span class="type">string|array</span> <code class="parameter">$key|keys</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">find</span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">findAndModify</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$update</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ]]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">findOne</span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ]]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCollection</span> <span class="methodname">__get</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getDBRef</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$ref</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getIndexInfo</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname">getName</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getReadPreference</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">getSlaveOkay</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getWriteConcern</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">group</span>
    ( <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$keys</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$initial</code></span>
   , <span class="methodparam"><span class="type">MongoCode</span> <code class="parameter">$reduce</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool|array</span> <span class="methodname">insert</span>
    ( <span class="methodparam"><span class="type">array|object</span> <code class="parameter">$document</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array[MongoCommandCursor]</span> <span class="methodname">parallelCollectionScan</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$num_cursors</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool|array</span> <span class="methodname">remove</span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$criteria</code><span class="initializer"> = array()</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">mixed</span> <span class="methodname">save</span>
    ( <span class="methodparam"><span class="type">array|object</span> <code class="parameter">$document</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">setReadPreference</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">setSlaveOkay</span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$ok</code><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">setWriteConcern</span>
    ( <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$w</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$wtimeout</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">static protected</span> <span class="type">string</span> <span class="methodname">toIndexString</span>
    ( <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$keys</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname">__toString</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool|array</span> <span class="methodname">update</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$criteria</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$new_object</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">validate</span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$scan_data</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
  ] )</div>

   }</div>


  </div>

  <div class="section">
   <h2 class="title">Predefined Constants</h2>
   <dl>

    
     <dt id="mongocollection.constants.ascending"><strong><code>MongoCollection::ASCENDING</code></strong></dt>

     <dt>
<strong><code>1</code></strong></dt>

     <dd>

      <span class="simpara">
       Ascending direction for sorts and index creation.
      </span>
     </dd>

    
    
     <dt id="mongocollection.constants.descending"><strong><code>MongoCollection::DESCENDING</code></strong></dt>

     <dt>
<strong><code>-1</code></strong></dt>

     <dd>

      <span class="simpara">
       Descending direction for sorts and index creation.
      </span>
     </dd>

    
   </dl>

  </div>

  <div class="section">
   <h2 class="title">Fields</h2>
   <dl>

    
     <dt id="mongocollection.props.db"><var class="varname">db</var></dt>

     <dd>

      <p class="para">
       The &quot;parent&quot; database for this collection.
      </p>
     </dd>

    
    
     <dt id="mongocollection.props.w"><var class="varname">w</var></dt>

     <dd>

      <p class="para">
       The number of servers to replicate a change to before returning success.
       Value is inherited from the parent database. The 
       <span class="classname">MongoDB</span> class has a more detailed description of
       how <em>w</em> works.
      </p>
     </dd>

    
    
     <dt id="mongocollection.props.wtimeout"><var class="varname">wtimeout</var></dt>

     <dd>

      <p class="para">
       The number of milliseconds to wait for <em>$this-&gt;w</em> 
       replications to take place.  Value is inherited from the parent database.
       The <span class="classname">MongoDB</span> class has a more detailed description 
       of how <em>wtimeout</em> works.
      </p>
     </dd>

    
   </dl>

  </div>

  <div class="section">
   <h2 class="title">See Also</h2>
   <p class="para">
    MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/glossary/#term-collection" class="link external">&raquo;&nbsp;collections</a>.
   </p>
  </div>

 </div>

 










 





 





 





 





 





 





 





 


 









 





 





 












 











 





 


















 












 





 





 





 





 












 












 











 





 







 




 <h1 class="title">The MongoCursor class</h1>
 

 <div class="partintro">

  
  <div class="section" id="mongocursor.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    A cursor is used to iterate through the results of a database query.  For 
    example, to query the database and see all results, you could do:
    <div class="example" id="example-1579">
     <p><strong>Example #1 <span class="classname">MongoCursor</span> basic usage</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">iterator_to_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    You don&#039;t generally create cursors using the 
    <span class="classname">MongoCursor</span> constructor, you get a new cursor by
    calling <span class="function">MongoCollection::find</span> (as shown above).
   </p>
   <p class="para">
    Suppose that, in the example above, <em>$collection</em> was a
    50GB collection.  We certainly wouldn&#039;t want to load that into memory all 
    at once, which is what a cursor is for: allowing the client to access the 
    collection in dribs and drabs.  
   </p>
   <p class="para">
    If we have a large result set, we can iterate through it, loading a few 
    megabytes of results into memory at a time.  For example, we could do:
    <div class="example" id="example-1580">
     <p><strong>Example #2 Iterating over <span class="classname">MongoCursor</span></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">();<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;do&nbsp;something&nbsp;to&nbsp;each&nbsp;document<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    This will go through each document in the collection, loading and garbage 
    collecting documents as needed.
   </p>
   <p class="para">
    Note that this means that a cursor does not &quot;contain&quot; the database results, 
    it just manages them.  Thus, if you print a cursor (with, say, 
    <span class="function">var_dump</span> or <span class="function">print_r</span>), you&#039;ll just 
    get the cursor object, not your documents.  To get the documents themselves, 
    you can use one of the methods shown above.
   </p>
  </div>

  <div class="section">
   <h2 class="title">Cursor Stages</h2>
   <p class="para">
    A <span class="classname">MongoCursor</span> has two &quot;life stages&quot;: pre- and post-
    query. When a cursor is created, it has not yet contacted the database, so 
    it is in its pre-query state.  In this state, the client can further specify
    what they want the query to do, including adding limits, skips, sorts, and 
    more advanced options.
   </p>
   <p class="para">
    When the client attempts to get a result (by calling 
    <span class="function">MongoCursor::next</span>, directly or indirectly), the cursor
    moves into the post-query stage.  At this point, the query has been executed
    by the database and cannot be modified anymore.
   </p>
   <p class="para">
    <div class="example" id="example-1581">
     <p><strong>Example #3 Adding options to <span class="classname">MongoCursor</span></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;database&nbsp;has&nbsp;not&nbsp;yet&nbsp;been&nbsp;queried,&nbsp;so&nbsp;more&nbsp;search&nbsp;options&nbsp;can&nbsp;be&nbsp;added<br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sort</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getNext</span><span style="color: #007700">());<br /></span><span style="color: #FF8000">//&nbsp;now&nbsp;database&nbsp;has&nbsp;been&nbsp;queried&nbsp;and&nbsp;more&nbsp;options&nbsp;cannot&nbsp;be&nbsp;added<br /><br />//&nbsp;so&nbsp;this&nbsp;will&nbsp;throw&nbsp;an&nbsp;exception:<br /></span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">skip</span><span style="color: #007700">(</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
  </div>
  

  <div class="section" id="mongocursor.synopsis">
   <h2 class="title">Class synopsis</h2>

   
   <div class="classsynopsis">
    <div class="ooclass"><strong class="classname">MongoCursor</strong></div>

    
    <div class="classsynopsisinfo">
     <span class="ooclass">
       class <strong class="classname">MongoCursor</strong>
     </span>
     <span class="oointerface">implements 
      <span class="interfacename">MongoCursorInterface</span>
     </span>
     <span class="oointerface">, 
      <span class="interfacename">Iterator</span>
     </span>
     {</div>
    
    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Static Fields */</div>
    <div class="fieldsynopsis">
     <span class="modifier">static</span>
     <span class="type">boolean</span>
     <var class="varname">$slaveOkay</var>
     <span class="initializer"> = <strong><code>FALSE</code></strong></span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">static</span>
     <span class="type">integer</span>
     <var class="varname">$timeout</var>
     <span class="initializer"> = 30000</span>
    ;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">addOption</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$key</code></span>
   , <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$value</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">awaitData</span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$wait</code><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">batchSize</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$batchSize</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>  <span class="methodname">__construct</span>
    ( <span class="methodparam"><span class="type">MongoClient</span> <code class="parameter">$connection</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$query</code><span class="initializer"> = array()</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code><span class="initializer"> = array()</span></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname">count</span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$foundOnly</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">current</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">dead</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">protected</span> <span class="type">void</span> <span class="methodname">doQuery</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">explain</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">fields</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$f</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getNext</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getReadPreference</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">hasNext</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">hint</span>
    ( <span class="methodparam"><span class="type">mixed</span> <code class="parameter">$index</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">immortal</span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$liveForever</code><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">info</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string|int</span> <span class="methodname">key</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">limit</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$num</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">maxTimeMS</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">next</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">partial</span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$okay</code><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname">reset</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname">rewind</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">setFlag</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$flag</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$set</code><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">setReadPreference</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">skip</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$num</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">slaveOkay</span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$okay</code><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">snapshot</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">sort</span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$fields</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">tailable</span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$tail</code><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCursor</span> <span class="methodname">timeout</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">valid</span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>
   

  </div>

  <div class="section">
   <h2 class="title">Static Variables</h2>

   <dl>

    
     <dt id="mongocursor.props.slaveokay"><var class="varname">slaveOkay</var></dt>

     <dd>

      <p class="para">
       If the query should have the &quot;slaveOkay&quot; flag set, which allows reads on
       the secondary (secondaries are, by default, just for backup and not
       queried). Can be overridden with <span class="function">MongoCursor::slaveOkay</span>.
      </p>
      <p class="para">
       This functionality is <em class="emphasis">deprecated</em>. Please use
       <a href="mongo.readpreferences.html" class="xref">Read Preferences</a> instead.
      </p>
     </dd>

    
    
     <dt id="mongocursor.props.timeout"><var class="varname">timeout</var></dt>

     <dd>

      <p class="para">
       Set timeout in milliseconds for all database responses. Use
       <em>-1</em> to wait forever. Can be overridden with
       <span class="function">MongoCursor::timeout</span>. This does not cause the
       MongoDB server to cancel the operation; it only instructs the driver to
       stop waiting for a response and throw a
       <span class="classname">MongoCursorTimeoutException</span> after a set time.
      </p>
     </dd>

    
   </dl>

  </div>

  <div class="section">
   <h2 class="title">See Also</h2>
   <p class="para">
    MongoDB core docs on <a href="https://docs.mongodb.com/manual/core/cursors/" class="link external">&raquo;&nbsp;cursors</a>.
   </p>
  </div>

 </div>

 



 





 





 





 





 





 





 





 





 





 





 












 





 





 





 





 





 





 





 





 





 





 





 












 





 





 





 





 





 





 







 




 <h1 class="title">The MongoCursorInterface interface</h1>
 

 <div class="partintro">

  
  <div class="section" id="mongocursorinterface.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    Interface for cursors, which can be used to iterate through results of a
    database query or command. This interface is implemented by the
    <span class="classname">MongoCursor</span> and
    <span class="classname">MongoCommandCursor</span> classes.
   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <span class="simpara">
     Similar to <span class="classname">Traversable</span>, this interface cannot be
     implemented in PHP scripts.
    </span>
   </p></blockquote>
  </div>
  

  <div class="section" id="mongocursorinterface.synopsis">
   <h2 class="title">Class synopsis</h2>

   
   <div class="classsynopsis">
    <div class="ooclass"><strong class="classname">MongoCursorInterface</strong></div>

    
    <div class="classsynopsisinfo">
     <span class="ooclass">
       class <strong class="classname">MongoCursorInterface</strong>
     </span>

     <span class="ooclass">
      <span class="modifier">extends</span>
      <strong class="classname"> Iterator</strong>
     </span>
     {</div>
    

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">MongoCursorInterface</span> <span class="methodname">batchSize</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$batchSize</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">dead</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getReadPreference</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">info</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">MongoCursorInterface</span> <span class="methodname">setReadPreference</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">MongoCursorInterface</span> <span class="methodname">timeout</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
   )</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Inherited methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">mixed</span> <span class="methodname">Iterator::current</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">scalar</span> <span class="methodname">Iterator::key</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">void</span> <span class="methodname">Iterator::next</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">void</span> <span class="methodname">Iterator::rewind</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">abstract</span> <span class="modifier">public</span> <span class="type">boolean</span> <span class="methodname">Iterator::valid</span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>
   
  </div>

 </div>

 















































 




 <h1 class="title">The MongoCommandCursor class</h1>
 

 <div class="partintro">

  
  <div class="section" id="mongocommandcursor.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    A command cursor is similar to a <span class="classname">MongoCursor</span> except
    that you use it for iterating through the results of a database command
    instead of a normal query. Command cursors are useful for iterating over
    large result sets that might exceed the document size limit (currently 16MB)
    of a single <span class="function">MongoDB::command</span> response.
   </p>
   <p class="para">
    While you can create command cursors using
    <span class="function">MongoCommandCursor::__construct</span> or the
    <span class="function">MongoCommandCursor::createFromDocument</span> factory method,
    you will generally want to use command-specific helpers such as
    <span class="function">MongoCollection::aggregateCursor</span>.
   </p>
   <p class="para">
    Note that the cursor does not &quot;contain&quot; the database command&#039;s results; it
    just manages iteration through them. Thus, if you print a cursor (f.e. with
    <span class="function">var_dump</span> or <span class="function">print_r</span>), you will see
    the cursor object but not the result documents.
   </p>
  </div>

  <div class="section">
   <h2 class="title">Cursor Stages</h2>
   <p class="para">
    A <span class="classname">MongoCommandCursor</span> has two &quot;life stages&quot;: pre-
    and post- command. When a cursor is created, it has not yet contacted the
    database, so it is in its pre-command state. When the client first attempts
    to get a result (by calling <span class="function">MongoCommandCursor::rewind</span>,
    directly or indirectly), the cursor moves into the post-command state.
   </p>
   <p class="para">
    The command cursor&#039;s batch size and socket timeout may be configured in both
    the pre- and post- command states.
   </p>
   <p class="para">
    <div class="example" id="example-1598">
     <p><strong>Example #1 Adding options to <span class="classname">MongoCommandCursor</span></strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$cursor&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoCommandCursor</span><span style="color: #007700">(...);<br /><br /></span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cursor</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">batchSize</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$cursor&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
  </div>
  

  <div class="section" id="mongocommandcursor.synopsis">
   <h2 class="title">Class synopsis</h2>

   
   <div class="classsynopsis">
    <div class="ooclass"><strong class="classname">MongoCommandCursor</strong></div>

    
    <div class="classsynopsisinfo">
     <span class="ooclass">
       class <strong class="classname">MongoCommandCursor</strong>
     </span>
     <span class="oointerface">implements 
      <span class="interfacename">MongoCursorInterface</span>
     </span>
     <span class="oointerface">, 
      <span class="interfacename">Iterator</span>
     </span>
     {</div>
    
    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCommandCursor</span> <span class="methodname">batchSize</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$batchSize</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>  <span class="methodname">__construct</span>
    ( <span class="methodparam"><span class="type">MongoClient</span> <code class="parameter">$connection</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$command</code><span class="initializer"> = array()</span></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">MongoCommandCursor</span> <span class="methodname">createFromDocument</span>
    ( <span class="methodparam"><span class="type">MongoClient</span> <code class="parameter">$connection</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$hash</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$document</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">current</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">dead</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">getReadPreference</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">info</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname">key</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname">next</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname">rewind</span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCommandCursor</span> <span class="methodname">setReadPreference</span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$read_preference</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$tags</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">MongoCommandCursor</span> <span class="methodname">timeout</span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$ms</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname">valid</span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>
   

  </div>

  <div class="section">
   <h2 class="title">See Also</h2>
   <ul class="simplelist">
    <li class="member"> <span class="methodname">MongoDB::command</span></li>
    <li class="member"> <span class="methodname">MongoCollection::aggregateCursor</span></li>
   </ul>
  </div>

 </div>

 



 





 





 





 





 












 





 





 





 












 





 








</div>
        </td>
    </tr>
</table>
</body>
</html>
