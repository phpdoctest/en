<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP Manual: Architecture</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP Manual</a></li>
  <li class="header up"><a href="funcref.html">Function Reference</a></li>
  <li class="header up"><a href="refs.database.html">Database Extensions</a></li>
  <li class="header up"><a href="refs.database.vendors.html">Vendor Specific Database Extensions</a></li>
  <li class="header up"><a href="set.mysqlinfo.html">MySQL</a></li>
  <li class="header up"><a href="book.mysqlnd-mux.html">mysqlnd_mux</a></li>
  <li class="header up"><a href="mysqlnd-mux.concepts.html">Concepts</a></li>
  <li class="active"><a href="mysqlnd-mux.architecture.html">Architecture</a></li>
  <li><a href="mysqlnd-mux.connection_pool.html">Connection pool</a></li>
  <li><a href="mysqlnd-mux.sharing_connections.html">Sharing connections</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="mysqlnd-mux.concepts.html">Concepts</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="mysqlnd-mux.connection_pool.html">Connection pool</a></div>
                <div class="up"><a href="mysqlnd-mux.concepts.html">Concepts</a></div>
                <div class="home"><a href="index.html">PHP Manual</a></div>
            </div><hr/>
<div id="mysqlnd-mux.architecture" class="section">
  <h2 class="title">Architecture</h2>
  <p class="para">
   The mysqlnd connection multiplexing plugin is implemented as a PHP extension.
   It is written in C and operates under the hood of PHP. During the
   startup of the PHP interpreter, in the module initialization phase of the
   PHP engine, it gets registered as a
   <a href="book.mysqlnd.html" class="link">mysqlnd</a> plugin to replace specific
   mysqlnd C methods.
  </p>
  <p class="para">
   The mysqlnd library uses PHP streams to communicate with the MySQL
   server. PHP streams are accessed by the mysqlnd library through its net module.
   The mysqlnd connection multiplexing plugin proxies methods of the mysqlnd
   library net module to control opening and closing of network streams.
  </p>
  <p class="para">
   Upon opening a user connection to MySQL using the appropriate connection
   functions of either  <a href="book.mysqli.html" class="link">mysqli</a>,
   <a href="ref.pdo-mysql.html" class="link">PDO_MYSQL</a> or
   <a href="book.mysql.html" class="link">ext/mysql</a>, the plugin will search its
   connection pool for an open network connection. If the pool
   contains a network connection to the host specified by the connect function
   using the transport method requested (TCP/IP, Unix domain socket, Windows named pipe),
   the pooled connection is linked to the user handle. Otherwise, a new
   network connection is opened, put into the poolm and associated with the
   user connection handle. This way, multiple user handles can be linked
   to the same network connection.
  </p>
 </div>
        </td>
    </tr>
</table>
</body>
</html>
