<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP Manual: Case 2: using cgi.force_redirect</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td style="font-size: smaller;" width="15%">
<style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="index.html">PHP Manual</a></li>
  <li class="header up"><a href="security.html">Security</a></li>
  <li class="header up"><a href="security.cgi-bin.html">Installed as CGI binary</a></li>
  <li><a href="security.cgi-bin.attacks.html">Possible attacks</a></li>
  <li><a href="security.cgi-bin.default.html">Case 1: only public files served</a></li>
  <li class="active"><a href="security.cgi-bin.force-redirect.html">Case 2: using cgi.force_redirect</a></li>
  <li><a href="security.cgi-bin.doc-root.html">Case 3: setting doc_root or user_dir</a></li>
  <li><a href="security.cgi-bin.shell.html">Case 4: PHP parser outside of web tree</a></li>
 </ul>

        </td>
        <td width="85%">
            <div style="text-align: center;">
                <div class="prev" style="text-align: left; float: left;"><a href="security.cgi-bin.default.html">Case 1: only public files served</a></div>
                <div class="next" style="text-align: right; float: right;"><a href="security.cgi-bin.doc-root.html">Case 3: setting doc_root or user_dir</a></div>
                <div class="up"><a href="security.cgi-bin.html">Installed as CGI binary</a></div>
                <div class="home"><a href="index.html">PHP Manual</a></div>
            </div><hr/>
<div id="security.cgi-bin.force-redirect" class="sect1">
    <h2 class="title">Case 2: using <em>cgi.force_redirect</em></h2>
    <p class="simpara">
     The configuration directive <a href="ini.core.html#ini.cgi.force-redirect" class="link">cgi.force_redirect</a>
     prevents anyone from calling PHP
     directly with a URL like <var class="filename">http://my.host/cgi-bin/php/secretdir/script.php</var>.
     Instead, PHP will only parse in this mode if it has gone through
     a web server redirect rule.
     PHP older than 4.2.0 used <em>--enable-force-cgi-redirect</em>
     compile time option for this.
    </p>
    <p class="simpara">
     Usually the redirection in the Apache configuration is done with
     the following directives:
    </p>
    <div class="example-contents">
<div class="apache-confcode"><pre class="apache-confcode">Action php-script /cgi-bin/php
AddHandler php-script .php</pre>
</div>
    </div>

    <p class="simpara">
     This option has only been tested with the Apache web server, and
     relies on Apache to set the non-standard CGI environment variable
     <var class="envar">REDIRECT_STATUS</var> on redirected requests.  If your
     web server does not support any way of telling if the request is
     direct or redirected, you cannot use this option and you must use
     one of the other ways of running the CGI version documented
     here.
    </p>
   </div>
        </td>
    </tr>
</table>
</body>
</html>
